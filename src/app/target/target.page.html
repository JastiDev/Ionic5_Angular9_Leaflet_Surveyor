<ion-header *ngIf="!isCam">
  <ion-toolbar color="dark">
    <ion-buttons slot="start">
      <ion-back-button></ion-back-button>
    </ion-buttons>
    <ion-title>
      {{target.title}}
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content *ngIf="!isCam" class="ion-padding" fullscreen>

  <ion-fab vertical="bottom" horizontal="end" slot="fixed">
    <ion-fab-button color="dark" (click)="onClickAdd()">
      <ion-icon name="camera"></ion-icon>
    </ion-fab-button>
  </ion-fab>

  <div *ngIf="!target.isMeasured" style="text-align: center;">To measure, at least 2 origin data required</div>
  <div *ngIf="target.isMeasured" class="ion-padding" style="border: 8px double grey; display:flex;">
    <div style="flex:1;">
      <strong>{{target.title}}</strong>
      <hr />
      <div>latitude: {{r7(target.latitude)}}</div>
      <div>longitude: {{r7(target.longitude)}}</div>
      <div>height: {{r7(target.height)}}</div>
    </div>
    <div>
      <ion-button color="dark" (click)="toggleShowMap(true)">
        <ion-icon name="map-outline"></ion-icon>
        Map
      </ion-button>
    </div>
  </div>

  <div style="display: flex; flex-wrap: wrap;">
    <ion-card
    *ngFor="let origin of target.arrOrigin; index as pos">

      <ion-card-content>
        
        <p>{{origin.timestamp}}</p>
        <img [src]="origin.photoUrl===''?'assets/surveyor.png':origin.photoUrl" style="width:100px; height:100px; object-fit: contain;">
        <div>latitude: {{origin.latitude}}</div>
        <div>longitude: {{origin.longitude}}</div>
        <div>heading: {{r7(origin.heading)}}</div>
        <div>elevation: {{r7(origin.elevation)}}</div>       

        <ion-fab vertical="top" horizontal="end" slot="fixed">
          <ion-fab-button size="small"  color="light" (click)="onClickRemove(pos)">
            <ion-icon name="close-outline"></ion-icon>
          </ion-fab-button>
        </ion-fab>

      </ion-card-content>

    </ion-card>
  </div>

</ion-content>


<app-camview *ngIf="isCam" 
  (closeCamview)="closeCamview()"
  [iTarget]="id"
>
</app-camview>

<app-mapview [iTarget]="id" (closeMapview)="toggleShowMap(false)" *ngIf="isShowMap">
</app-mapview>